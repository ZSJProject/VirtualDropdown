window.VSDropdown=function(e){var t={};function o(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=5)}([function(e,t){e.exports='<div class=vs-dropdown ng-class=selectorPosition ng-click=$event.stopPropagation() off-click=vdCtrl.closeAll() off-click-if="vdCtrl.showSelector || vdCtrl.showOverlay"><div class=vd-selection-group><div class=vd-overlay-wrap ng-if="vdCtrl.showOverlay &amp;&amp; selectedItems.length &gt; 0"><div class=vd-overlay><div class=vd-overlay-title><span class=vd-overlay-title-text ng-click=vdCtrl.toggleSelector()>{{vdCtrl.options.view.overlayText}}</span></div><div class=vd-items vs-repeat={{vdCtrl.options.itemHeight}}><div class="vd-item vd-selected-item vd-selected-item-color" ng-click=$event.stopPropagation() ng-repeat="item in selectedItems track by $index"><div class=vd-item-content><div class=vd-properties-btn ng-if=vdCtrl.isObject(item)><span class="icon vd-icon-properties" ng-class="vsddPopoverCtrl.popover !== null ? &quot;icon-down&quot; : &quot;icon-right&quot;" ng-click=vsddPopoverCtrl.showProperties($event) ng-keydown="$event.which === 13 ? vsddPopoverCtrl.showProperties($event) : null" vd-popover=""></span></div><div class=vd-item-text-wrap><div class=vd-item-text>{{vdCtrl.getPropertyValue(vdCtrl.visiblePropName, item)}}</div><div class=vd-delete-btn ng-click="vdCtrl.removeItem($index, $event)"><span svg-kit=GENERAL_NEGATIVE w=1rem h=1rem></span></div></div></div></div></div></div></div><div class=vd-selection ng-show=!vdCtrl.showOverlay ng-click=vdCtrl.toggleSelector() ng-bind-html=vdCtrl.getSelectText(selectedItems)></div><div class=vd-btn-selections ng-click="selectedItems.length &gt; 0 &amp;&amp; vdCtrl.toggleOverlay()"><span class="vd-selection-count vd-counter">{{selectedItems.length || \'0\'}}</span></div></div><div class=vd-selector ng-show=vdCtrl.showSelector><div class=vd-filter-group ng-class="vdCtrl.filterdItems.length ? &quot;vs-hits-filter&quot; : &quot;vs-nohits-filter&quot;" ng-show=vdCtrl.options.filter.enabled><div class=vd-check-btn ng-disabled=!vdCtrl.useAllSelect() ng-selected=vdCtrl.isAllSelected() ng-click=vdCtrl.toggleAllSelect()></div><input class=vd-filter-input kr-input=filterText type=text placeholder={{vdCtrl.options.filter.filterPlaceholderTxt}} /><div class=vd-filter-match><span class="vd-filter-match-text vd-counter">{{vdCtrl.filterdItems.length || \'0\'}}</span></div><div class=vd-icon-filter-clear ng-show="filterText.length &gt; 0"><span class="icon vd-icon-clear icon-clear" ng-click=clearFilter() ng-keydown="$event.which === 13 ? clearFilter() : null" tabindex=0></span></div></div><s-content class=vd-items vs-repeat={{vdCtrl.options.itemHeight}}><div class=vd-item ng-repeat="item in vdCtrl.filterdItems track by $index" ng-click="vdCtrl.itemClicked(item, $index, $event)"><div class=vd-item-content><div class=vd-check-btn ng-selected=vdCtrl.isItemSelected(item)></div><div class=vd-properties-btn ng-if=vdCtrl.isObject(item)><span class="icon vd-icon-properties" ng-class="vsddPopoverCtrl.popover !== null ? &quot;icon-down&quot; : &quot;icon-right&quot;" ng-click=vsddPopoverCtrl.showProperties($event) ng-keydown="$event.which === 13 ? vsddPopoverCtrl.showProperties($event) : null" vd-popover=""></span></div><div class=vd-item-text-wrap><div class=vd-item-text>{{vdCtrl.getPropertyValue(vdCtrl.visiblePropName, item)}}</div></div></div></div></s-content></div></div>'},function(e,t,o){e.exports=["$parse","throttle",function(e,t){return{restrict:"EA",require:["^vsDropdown"],template:o(0),scope:{selectedItems:"=",options:"="},controllerAs:"vdCtrl",link:function(o,i,l,n){var s=n[0]||{},r=i[0].querySelector(".vs-dropdown"),c=i[0].querySelector(".vd-items");function p(){if(!(o.selectedItems&&o.selectedItems instanceof Array)){var t=e(l.selectedItems),i=t.assign,n=t(o.$parent);n&&n instanceof Array||i(o.$parent,o.selectedItems?[o.selectedItems]:[])}}p(),s.applyItems(l.items),o.filterText="",o.getSelectorPosition=function(){var e=r.getBoundingClientRect(),t=window.innerHeight-e.y,i=e.y;230<t?(c.style.maxHeight="160px",o.selectorPosition="bottom"):230<i?(c.style.maxHeight="160px",o.selectorPosition="top"):150<t?(c.style.maxHeight="80px",o.selectorPosition="bottom"):150<i?(c.style.maxHeight="80px",o.selectorPosition="top"):(c.style.maxHeight=t+"px",o.selectorPosition="bottom")},o.$watch("filterText",t(function(){s.filtering(),c&&(c.scrollTop=0)},30)),o.$watch("selectedItems",p),o.$watch("options",s.applyOptions),l.$observe("items",s.applyItems),l.$observe("placeholder",function(e){e&&(s.placeholder=e)})},controller:["$scope","$filter","$window","vdConfig",function(t,o,i,l){var n,s,r=this;function c(e,o){r.options&&"function"==typeof r.options.itemSelectCb&&r.options.itemSelectCb(t.selectedItems,e,o)}this.options=Object.assign({},l.BASIC_OPTION,{view:Object.assign({},l.BASIC_VIEW),filter:Object.assign({},l.BASIC_FILTER)}),this.filterdItems=[],this.showOverlay=!1,this.showSelector=!1,Object.defineProperties(this,{items:{get:function(){return n?n(t.$parent):[]}},visiblePropName:{get:function(){return this.options&&this.options.visiblePropName}}}),Object.assign(this,{applyItems:function(t){t&&(n=e(t))},applyOptions:function(e){if("object"==typeof e){r.options=Object.assign({},l.BASIC_OPTION,e||{});var t=parseInt(r.options.itemHeight);multiple=parseInt(r.options.multiple),isNaN(multiple)||multiple<1?r.options.multiple=1:r.options.multiple=multiple,isNaN(t)||t<16?r.options.itemHeight=16:r.options.itemHeight=t,r.options.view=Object.assign({},l.BASIC_VIEW,r.options.view||{}),r.options.filter=Object.assign({},l.BASIC_FILTER,r.options.filter||{})}},useAllSelect:function(){return(r.options||{multiple:1}).multiple>1&&r.filterdItems.length<l.ALL_SELECT_LIMIT},isAllSelected:function(){var e=r.options||{multiple:1};return Math.min(r.filterdItems.length,e.multiple)<=t.selectedItems.length},isObject:function(e){return"object"==typeof e},closeAll:function(){r.showOverlay=!1,r.showSelector=!1},toggleSelector:function(e){null!=e?r.showOverlay=e:r.showSelector=!r.showSelector,r.showSelector&&t.getSelectorPosition(),r.showSelector&&r.showOverlay&&(r.showOverlay=!1)},toggleOverlay:function(e){r.showOverlay=null!=e?e:!r.showOverlay,r.showOverlay&&r.showSelector&&(r.showSelector=!1)},itemClicked:function(e,t,o){var i=r.IndexofItemSelected(e),l=r.options||{multiple:1};-1===i?r.addItem(e,o):r.removeItem(i,o),1===l.multiple&&(r.showSelector=!1)},addItem:function(e,o){o&&o.stopPropagation();var i=r.options||{multiple:1},n=t.selectedItems;i.multiple>1?(n.length===i.multiple&&r.removeItem(n.length-1,o),n.push(e)):n[0]=e,c(e,l.OPERATION_ADD)},removeItem:function(e,o){o.stopPropagation();var i=t.selectedItems,n=i[e];1===i.length&&r.toggleOverlay(!1),i.splice(e,1),c(n,l.OPERATION_DEL)},toggleAllSelect:function(){var e=t.selectedItems;if(r.isAllSelected())e.splice(0,e.length);else{var o=r.options||{multiple:1},i=r.filterdItems,l=o.multiple-e.length;if(l>0)for(var n=0;n<i.length;n++){var s=r.filterdItems[n];if(l<=0)break;r.isItemSelected(s)||(e.push(s),l--)}}},isItemSelected:function(e){return-1!==r.IndexofItemSelected(e)},IndexofItemSelected:function(e){var o=r.options,i=t.selectedItems;if("object"==typeof e){var l=o.objectCompare;if("function"==typeof l){for(var n=0;n<i.length;n++)if(l(i[n],e))return n;return-1}}return t.selectedItems.indexOf(e)},getPropertyValue:function(e,t){var o=t,i="object"==typeof t;return r.options&&"function"==typeof r.options.makeItemText?o=r.options.makeItemText(t):null==e?o=t:i&&(o=-1===e.indexOf(l.DOT_SEPARATOR)?t[e]:function(e,t){var o=e.split(l.DOT_SEPARATOR),i=angular.copy(t);return angular.forEach(o,function(e){i=i[e]}),i}(e,t)),o||"알 수 없음"},getViewProperties:function(e){return r.options.view.properties||Object.keys(e)},getSelectText:function(e){return(r.options&&"function"==typeof r.options.makeSelectText?r.options.makeSelectText(e):e[0]?r.getPropertyValue(r.visiblePropName,e[0]):r.placeholder)||"아이템 선택"},filtering:function(){var e=t.filterText,i=o("filter");if(s!==e)return r.items,"string"==typeof e&&e.length?(r.options&&"function"==typeof r.options.filtering&&(i=r.options.filtering),r.filterdItems=i(r.items,e)):r.filterdItems=r.items;return r.filterdItems},clearFilter:function(){t.filterText=""}}),i.addEventListener("resize",r.closeAll),t.$on("$destroy",function(){i.removeEventListener("resize",r.closeAll)})}]}}]},function(e,t){e.exports='<div class=vd-popover><table class=vd-properties ng-click=vdPopoverCtrl.closeProperties($event);><tr><th>{{vdCtrl.options.view.propertyTitle}}</th><th>{{vdCtrl.options.view.valueTitle}}</th></tr><tr ng-repeat="property in vdCtrl.getViewProperties() track by $index"><td>{{property}}</td><td>{{vdCtrl.getPropertyValue(property, item)}}</td></tr></table></div>'},function(e,t,o){e.exports=["$compile",function(e){return{restrict:"A",scope:!1,controllerAs:"vdPopoverCtrl",controller:["$scope","$compile","vdConfig",function(e,t,i){var l=this;this.popover=null,this.options={},this.showProperties=function(i){i&&i.stopPropagation(),angular.equals(this.popover,null)?(this.popover=angular.element(o(2)),element.append(t(this.popover)(e))):this.closeProperties()},this.closeProperties=function(e){e&&e.stopPropagation(),angular.equals(this.popover,null)||(this.popover.remove(),this.popover=null)},e.$on(i.OPTION_UPDATE_EVENT,function(e){l.options=e.input&&e.input.properties||{}})}]}}]},function(e,t){e.exports={ALL_SELECT_LIMIT:20,LIST_FOCUS_EVENT:"vsdropdown.listFocusEvent",OPTION_UPDATE_EVENT:"vsdropdown.listFocusEvent",OPERATION_ADD:"add",OPERATION_DEL:"del",DOT_SEPARATOR:".",BASIC_OPTION:{itemHeight:32,multiple:10,showCount:!0},BASIC_VIEW:{overlayText:"선택된 아이템",propertyTitle:"속성",valueTitle:"값"},BASIC_FILTER:{enabled:!0,filterPlaceholderTxt:"필터"}}},function(e,t,o){angular.module("vsdropdown",[]).constant("vdConfig",o(4)).directive("vdPopover",o(3)).directive("vsDropdown",o(1))}]);